{% extends "eZPlatformUIBundle::pjax_admin.html.twig" %}

{% trans_default_domain "section" %}

{% block header_breadcrumbs %}
    {% set breadcrumb_items = [
        {link: path('admin_dashboard'), label: 'dashboard.title'|trans({}, 'dashboard')},
        {link: path('admin_sectionlist'), label: 'section.list'|trans({}, 'section')},
        {link: '', label: 'section.view.title'|trans({'%sectionName%': section.name}, 'section')}
    ] %}

    {{ parent() }}
{% endblock %}

{% block header_title %}
    <h1 class="ez-page-header-name">
        {{ ez_ui_icon('sections') }}
        {{ 'section.view.title'|trans({'%sectionName%': section.name}) }}
    </h1>
{% endblock %}

{% block content %}
    <section class="ez-tabs ez-serverside-content">
        <ul class="ez-tabs-list">
            <li class="ez-tabs-label is-tab-selected"><a href="#ez-tabs-section-name">{{ section.name }}</a></li>
            <li class="ez-tabs-label"><a href="#ez-tabs-content">{{ 'section.content.translate'|trans({"%contentCount%": contentCount}) }}</a></li>
        </ul>
        <div class="ez-tabs-panel is-tab-selected" id="ez-tabs-section-name">
            <ul>
                <li>
                    <strong>{{ 'section.name.label'|trans }}</strong>
                    {{ section.name }}
                </li>
                <li>
                    <strong>{{ 'section.identifier.label'|trans }}</strong>
                    {{ section.identifier }}
                </li>
                <li>
                    <strong>{{ 'section.id.label'|trans }}</strong>
                    {{ section.id }}
                </li>
            </ul>
            <p>
                {{ 'section.assigned.contentcount'|transchoice(contentCount, {'%contentCount%': contentCount} ) }}
            </p>

            <div>
                {{ form_start(deleteForm, {"action": path("admin_sectiondelete", {"sectionId": section.id, "redirectErrorsTo": "view"})}) }}
                    {% set dialogId = 'confirm-section-removal' %}
                    {{
                        include('@EzSystemsHybridPlatformUi/components/confirm_delete_dialog.html.twig', {
                            'dialogId': dialogId,
                            'message': 'confirm.remove.section'|trans()|desc('Are you sure you want to delete this section?'),
                            'confirmButton': deleteForm.delete,
                        })
                    }}

                    <a href="{{ path('admin_sectionedit', {'sectionId': section.id}) }}"
                       {% if not canEdit %}data-disabled{%endif %}
                       class="ez-button ez-button-primary">
                        {{ ez_ui_icon('edit') }}
                        {{ 'section.edit'|trans }}
                    </a>

                    {{ form_widget(deleteForm.sectionId) }}

                    <button type="button" value="#{{ dialogId }}"
                        class="ez-button ez-button-negative ez-js-open-modal" {% if not deletable %} disabled{% endif %}>
                        {{ ez_ui_icon('trash') }}
                        {{ deleteForm.delete.vars.label|trans({}, deleteForm.delete.vars.translation_domain) }}
                    </button>
                {{ form_end(deleteForm) }}
            </div>
        </div>

        <div class="ez-tabs-panel" id="ez-tabs-content">
            <p>
                <button
                    data-universaldiscovery-title="{{ 'section.assign.universaldiscovery.title'|trans({'%sectionName%': section.name })|e('html_attr') }}"
                    data-section-rest-id="{{ path( 'ezpublish_rest_loadSection', {'sectionId': section.id}) }}"
                    data-section-name="{{ section.name }}"
                    class="ez-button ez-button-primary"
                    {% if not canAssign %}disabled{% endif %}>
                    {{ ez_ui_icon('relations') }}
                    {{ 'section.assign.contents'|trans }}
                </button>
            </p>
        </div>
    </section>
{% endblock %}

{% block title %}{{ 'section.view.title'|trans({'%sectionName%': section.name}) }}{% endblock %}
